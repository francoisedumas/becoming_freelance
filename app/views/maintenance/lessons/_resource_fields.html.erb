<%= form.fields_for :resources do |res_form| %>
  <div class="space-y-2">
    <div>
      <%= res_form.label :resource_type, class: "block text-sm font-medium text-gray-700" %>
      <%= res_form.select :resource_type, Resource.resource_types.keys.map { |type| [type.humanize, type] }, {}, class: "mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" %>
    </div>

    <div>
      <%= res_form.label :url, class: "block text-sm font-medium text-gray-700" %>
      <%= res_form.text_field :url, class: "mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" %>
    </div>

    <div>
      <%= res_form.label :description, class: "block text-sm font-medium text-gray-700" %>
      <%= res_form.text_area :description, class: "mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" %>
    </div>

    <div>
      <%= res_form.label :image, class: "block text-sm font-medium text-gray-700" %>
      <%= res_form.file_field :image, class: "mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" %>
    </div>
  </div>
<% end %>

<div data-nested-form-target="target"></div>

<button type="button" data-action="nested-form#add">Add resource</button>
<template data-nested-form-target="template">
  <%= form.fields_for :resources, Resource.new, child_index: 'NEW_RECORD' do |res_form| %>
    <div class="nested-form-wrapper space-y-2" data-new-record="<%= res_form.object.new_record? %>">
      <div>
        <%= res_form.label :resource_type, class: "block text-sm font-medium text-gray-700" %>
        <%= res_form.select :resource_type, Resource.resource_types.keys.map { |type| [type.humanize, type] }, {}, class: "mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" %>
      </div>

      <div>
        <%= res_form.label :url, class: "block text-sm font-medium text-gray-700" %>
        <%= res_form.text_field :url, class: "mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" %>
      </div>

      <div>
        <%= res_form.label :description, class: "block text-sm font-medium text-gray-700" %>
        <%= res_form.text_area :description, class: "mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" %>
      </div>

      <div>
        <%= res_form.label :image, class: "block text-sm font-medium text-gray-700" %>
        <%= res_form.file_field :image, class: "mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" %>
      </div>

      <button type="button" data-action="nested-form#remove">Remove resource</button>

      <%= res_form.hidden_field :_destroy %>
    </div>
  <% end %>
</template>
