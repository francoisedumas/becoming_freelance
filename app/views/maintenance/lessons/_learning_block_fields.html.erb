<%= form.fields_for :learning_blocks do |lb_form| %>
  <div class="space-y-2">
    <div>
      <%= lb_form.label :title, class: "block text-sm font-medium text-gray-700" %>
      <%= lb_form.text_field :title, class: "mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" %>
    </div>

    <div>
      <%= lb_form.label :content, class: "block text-sm font-medium text-gray-700" %>
      <%= lb_form.rich_text_area :content, class: "mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" %>
    </div>
  </div>
<% end %>
<div data-nested-form-target="target"></div>

<button type="button" data-action="nested-form#add">Add learning block</button>
<template data-nested-form-target="template">
  <%= form.fields_for :learning_blocks, LearningBlock.new, child_index: 'NEW_RECORD' do |lb_form| %>
    <div class="nested-form-wrapper space-y-2" data-new-record="<%= lb_form.object.new_record? %>">
      <div>
        <%= lb_form.label :title, class: "block text-sm font-medium text-gray-700" %>
        <%= lb_form.text_field :title, class: "mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" %>
      </div>

      <div>
        <%= lb_form.label :content, class: "block text-sm font-medium text-gray-700" %>
        <%= lb_form.rich_text_area :content, class: "mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" %>
      </div>

      <button type="button" data-action="nested-form#remove">Remove learning block</button>

      <%= lb_form.hidden_field :_destroy %>
    </div>
  <% end %>
</template>
