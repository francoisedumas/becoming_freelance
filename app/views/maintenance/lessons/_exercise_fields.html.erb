<%= form.fields_for :exercises do |ex_form| %>
  <div>
    <%= ex_form.label :description, class: "block text-sm font-medium text-gray-700" %>
    <%= ex_form.text_area :description, class: "mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" %>
  </div>
<% end %>
<div data-nested-form-target="target"></div>

<button type="button" data-action="nested-form#add">Add exercise</button>
<template data-nested-form-target="template">
  <%= form.fields_for :exercises, Exercise.new, child_index: 'NEW_RECORD' do |ex_form| %>
    <div class="nested-form-wrapper space-y-2" data-new-record="<%= ex_form.object.new_record? %>">
      <div>
        <%= ex_form.label :description, class: "block text-sm font-medium text-gray-700" %>
        <%= ex_form.text_area :description, class: "mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" %>
      </div>

      <button type="button" data-action="nested-form#remove">Remove exercise</button>

      <%= ex_form.hidden_field :_destroy %>
    </div>
  <% end %>
</template>
